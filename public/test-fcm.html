<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>FCM Token Test</title>
  </head>
  <body>
    <h1>FCM Token 테스트</h1>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
      import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-messaging.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDnusZ7fck0nU_b0iDZAbAUyliQ0Dbc5Mc",
        authDomain: "mycleanjcu.firebaseapp.com",
        projectId: "mycleanjcu",
        storageBucket: "mycleanjcu.firebaseapp.com",
        messagingSenderId: "137404600804",
        appId: "1:137404600804:web:e2bd6b28fe6d9b7cb637f1"
      };

      const app = initializeApp(firebaseConfig);
      const messaging = getMessaging(app);

      const VAPID_KEY = "BDUIz_uBYrL6sgMb2igVA0mkc7VAmH2qaJexVTQjz2MbhLf8brSMVlbWTnlvXyvBACYXwCXPwbhOG5I98Rc3g8";

      getToken(messaging, { vapidKey: VAPID_KEY }).then((currentToken) => {
        if (currentToken) {
          console.log("✅ Token:", currentToken);
          alert("Token: " + currentToken);
        } else {
          console.warn("⚠️ No token received. Permission might be blocked.");
        }
      }).catch((err) => {
        console.error("❌ Error getting token:", err);
      });
    </script>
  </body>
</html>
